---
/**
 * Podcast Index Page
 *
 * The Law Firm Growth Podcast - Marketing insights for attorneys
 */
import BaseLayout from '../../layouts/BaseLayout.astro';
import { Image } from 'astro:assets';
import heroBackground from '../../assets/images/heroes/podcast-index-hero.jpg';
import { episodes, getSortedEpisodes, formatDate, podcastPlatforms } from '../../data/podcast-episodes';

const sortedEpisodes = getSortedEpisodes();
const latestEpisode = sortedEpisodes[0];

// PodcastSeries Schema
const podcastSchema = {
  '@context': 'https://schema.org',
  '@type': 'PodcastSeries',
  name: 'The Law Firm Growth Podcast',
  description: 'Marketing insights and growth strategies for law firm owners. Weekly episodes with Keith Dyer covering SEO, PPC, intake, and more.',
  url: 'https://lexgro.com/podcast/',
  image: 'https://lexgro.com/og/podcast.png',
  author: {
    '@type': 'Person',
    name: 'Keith Dyer',
    url: 'https://lexgro.com/about/',
  },
  publisher: {
    '@type': 'Organization',
    name: 'LEXGRO',
    url: 'https://lexgro.com',
    logo: {
      '@type': 'ImageObject',
      url: 'https://lexgro.com/images/lexgro-logo.png',
    },
  },
  webFeed: [
    podcastPlatforms.apple,
    podcastPlatforms.spotify,
    podcastPlatforms.youtube,
  ],
  numberOfEpisodes: episodes.length,
};
---

<BaseLayout
  title="Law Firm Growth Podcast"
  description="Marketing insights and growth strategies for law firm owners. Weekly episodes with Keith Dyer covering SEO, PPC, intake, and more."
  image="/og/podcast.png"
>
  <script type="application/ld+json" set:html={JSON.stringify(podcastSchema)} />

  <!-- Hero Section -->
  <section class="podcast-hero">
    <Image src={heroBackground} alt="" class="hero-bg" widths={[800, 1200, 1920]} sizes="100vw" loading="eager" />
    <div class="hero-overlay"></div>
    <div class="container hero-container">
      <div class="hero-content">
        <span class="section-label">Podcast</span>
        <h1 class="hero-title">The Law Firm Growth Podcast</h1>
        <p class="hero-subtitle">
          Weekly conversations with legal marketing experts, successful law firm owners,
          and industry leaders. Actionable insights to help you grow your practice.
        </p>
        <div class="podcast-platforms">
          <span class="platforms-label">Listen on:</span>
          <div class="platform-links">
            <a href={podcastPlatforms.apple} class="platform-link" target="_blank" rel="noopener">Apple Podcasts</a>
            <a href={podcastPlatforms.spotify} class="platform-link" target="_blank" rel="noopener">Spotify</a>
            <a href={podcastPlatforms.youtube} class="platform-link" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Latest Episode -->
  <section class="latest-section">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Latest Episode</span>
      </div>

      <a href={`/podcast/${latestEpisode.slug}/`} class="latest-card">
        <div class="latest-badge">EP {latestEpisode.number}</div>
        <div class="latest-content">
          <h2 class="latest-title">{latestEpisode.title}</h2>
          <p class="latest-description">{latestEpisode.description}</p>
          <div class="latest-meta">
            <span class="meta-item">{latestEpisode.duration}</span>
            <span class="meta-divider">|</span>
            <span class="meta-item">{formatDate(latestEpisode.pubDate)}</span>
          </div>
          <span class="latest-cta">
            Listen Now
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
          </span>
        </div>
      </a>
    </div>
  </section>

  <!-- All Episodes -->
  <section class="episodes-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">All Episodes</h2>
        <p class="section-subtitle">{sortedEpisodes.length} episodes of marketing insights for law firms</p>
      </div>

      <div class="episodes-list">
        {sortedEpisodes.map((episode) => (
          <a href={`/podcast/${episode.slug}/`} class="episode-card">
            <div class="episode-number">EP {episode.number}</div>
            <div class="episode-content">
              <h3 class="episode-title">{episode.title}</h3>
              <p class="episode-description">{episode.description}</p>
            </div>
            <div class="episode-meta">
              <span class="episode-duration">{episode.duration}</span>
              <span class="episode-date">{formatDate(episode.pubDate)}</span>
            </div>
            <div class="episode-play">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2 class="cta-title">Want to Be a Guest?</h2>
        <p class="cta-subtitle">
          We're always looking for law firm owners and legal marketing experts to share their stories and insights.
        </p>
        <a href="/contact/" class="btn btn-primary btn-lg">
          Get in Touch
        </a>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Hero Section */
  .podcast-hero {
    padding: 5rem 0 4rem;
    background: var(--color-bg-dark);
    position: relative;
    overflow: hidden;
  }

  .hero-bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    z-index: 0;
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    z-index: 1;
    background: linear-gradient(to right, rgba(1, 25, 7, 0.85) 0%, rgba(1, 25, 7, 0.78) 40%, rgba(1, 25, 7, 0.68) 100%);
  }

  .hero-container {
    position: relative;
    z-index: 2;
  }

  .hero-content {
    max-width: 700px;
  }

  .section-label {
    color: var(--color-primary-light);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 0.75rem;
    display: block;
  }

  .hero-title {
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 800;
    line-height: 1.1;
    margin-bottom: 1.25rem;
    color: #fff;
  }

  .hero-subtitle {
    font-size: 1.125rem;
    color: #b0b8b3;
    line-height: 1.6;
    margin-bottom: 2rem;
  }

  .podcast-platforms {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 1rem;
  }

  .platforms-label {
    font-size: 0.875rem;
    color: #b0b8b3;
    font-weight: 500;
  }

  .platform-links {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .platform-link {
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 100px;
    font-size: 0.875rem;
    font-weight: 500;
    color: #fff;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .platform-link:hover {
    border-color: rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.15);
    color: #fff;
  }

  /* Latest Section */
  .latest-section {
    padding: 3rem 0 4rem;
    background: white;
  }

  .section-header {
    margin-bottom: 1.5rem;
  }

  .latest-card {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 2rem;
    padding: 2.5rem;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-teal) 100%);
    border-radius: 24px;
    text-decoration: none;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .latest-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(41, 140, 66, 0.25);
  }

  .latest-badge {
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    font-weight: 700;
    color: white;
  }

  .latest-content {
    color: white;
  }

  .latest-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.75rem;
    color: white;
  }

  .latest-description {
    font-size: 1rem;
    color: #b0b8b3;
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  .latest-meta {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
  }

  .meta-item {
    font-size: 0.875rem;
    color: #b0b8b3;
  }

  .meta-divider {
    color: #b0b8b3;
  }

  .latest-cta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    color: white;
  }

  .latest-card:hover .latest-cta {
    gap: 0.75rem;
  }

  /* Episodes Section */
  .episodes-section {
    padding: 4rem 0 5rem;
    background: #fafafa;
  }

  .section-title {
    font-size: clamp(1.5rem, 4vw, 2rem);
    color: var(--color-text-dark);
    margin-bottom: 0.5rem;
  }

  .section-subtitle {
    font-size: 1rem;
    color: #4b5563;
  }

  .episodes-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-top: 2rem;
  }

  .episode-card {
    display: grid;
    grid-template-columns: auto 1fr auto auto;
    gap: 1.5rem;
    align-items: center;
    padding: 1.5rem;
    background: white;
    border-radius: 16px;
    border: 1px solid rgba(0, 0, 0, 0.06);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    text-decoration: none;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  }

  .episode-card:hover {
    transform: translateX(4px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
    border-color: var(--color-primary);
  }

  @media (max-width: 768px) {
    .episode-card {
      grid-template-columns: auto 1fr auto;
      gap: 1rem;
    }

    .episode-meta {
      display: none;
    }
  }

  .episode-number {
    width: 56px;
    height: 56px;
    background: rgba(41, 140, 66, 0.08);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--color-primary);
  }

  .episode-content {
    min-width: 0;
  }

  .episode-title {
    font-size: 1.0625rem;
    font-weight: 600;
    color: var(--color-text-dark);
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .episode-description {
    font-size: 0.875rem;
    color: #4b5563;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .episode-meta {
    text-align: right;
  }

  .episode-duration {
    display: block;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text-dark);
  }

  .episode-date {
    display: block;
    font-size: 0.75rem;
    color: #4b5563;
  }

  .episode-play {
    width: 44px;
    height: 44px;
    background: var(--color-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    transition: transform 0.2s ease;
  }

  .episode-play svg {
    margin-left: 2px;
  }

  .episode-card:hover .episode-play {
    transform: scale(1.1);
  }

  /* CTA Section */
  .cta-section {
    padding: 5rem 0;
    background: linear-gradient(135deg, #0d3d1a 0%, #1a5c2e 100%);
    text-align: center;
  }

  .cta-content {
    max-width: 500px;
    margin: 0 auto;
  }

  .cta-title {
    font-size: clamp(1.75rem, 4vw, 2.25rem);
    color: white;
    margin-bottom: 1rem;
  }

  .cta-subtitle {
    font-size: 1rem;
    color: #b0b8b3;
    margin-bottom: 2rem;
    line-height: 1.6;
  }
</style>
