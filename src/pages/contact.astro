---
/**
 * Executive Growth Diagnostic - Application Page
 *
 * Application-based lead capture for qualified PI firms.
 * Simple form with qualification fields.
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import { Image } from 'astro:assets';

// Images
import keithPhoto from '../assets/images/sections/keith-cmo-photo.png';
import heroBackground from '../assets/images/heroes/contact-hero.jpg';

// What you get in the diagnostic (top 4 cards)
const diagnosticCards = [
  {
    icon: 'search',
    title: 'Competitive Intelligence Report',
    description: 'We run your market through LexxlyRank to show your keyword gaps, competitor ad spend, and where you are losing cases to firms with weaker services.',
  },
  {
    icon: 'chart',
    title: 'Full-Journey Attribution Review',
    description: 'Most firms only track last-click. We map the full path from first touch to signed case so you see which channels actually drive revenue.',
  },
  {
    icon: 'target',
    title: 'Website and Intake Audit',
    description: 'Page speed, mobile experience, intake form completion rates, and call tracking. We show you exactly where potential clients drop off.',
  },
  {
    icon: 'dollar',
    title: 'Ad Spend and LSA Analysis',
    description: 'Your cost per case on Google Ads and Local Service Ads. We identify wasted spend and show where to reallocate for more signed cases.',
  },
];

// Featured roadmap card
const roadmap = {
  title: '90-Day Growth Roadmap',
  description: '3 prioritized actions ranked by cost, effort, and expected case volume. Built around your practice area, market, and current budget.',
};

import roadmapBg from '../assets/images/sections/roadmap-bg.png';
---

<BaseLayout
  title="Executive Growth Diagnostic | LEXGRO"
  description="Apply for a free Growth Diagnostic for your injury law firm. We review your market, vendors, and numbers. Then we tell you exactly what we'd do."
  image="/og/contact.png"
>
  <!-- Hero Section -->
  <section class="audit-hero">
    <Image
      src={heroBackground}
      alt=""
      class="hero-bg"
      width={1920}
      quality={80}
    />
    <div class="hero-overlay"></div>
    <div class="hero-container">
      <div class="container">
        <div class="hero-layout">
        <div class="hero-content">
          <span class="section-label">Executive Growth Diagnostic</span>
          <h1 class="hero-title">Apply for Your Growth Diagnostic</h1>
          <p class="hero-subtitle">
            We review your market, your vendors, and your numbers. Then we tell you exactly what we'd do.
            No sales pitch. Just honest analysis and a clear action plan.
          </p>

          <div class="trust-signal">
            <Image
              src={keithPhoto}
              alt="Keith Dyer"
              class="keith-avatar"
              width={48}
            />
            <p class="trust-text">
              <strong>Keith Dyer</strong> personally reviews every application.
              If we can help, you'll hear from us within 24 hours.
            </p>
          </div>
        </div>

        <!-- Form Card -->
        <div class="form-card" id="audit-form">
          <form class="audit-form" name="growth-diagnostic" method="POST" action="/thank-you/" data-netlify="true" netlify-honeypot="bot-field">
            <input type="hidden" name="form-name" value="growth-diagnostic" />
            <p class="hidden"><label>Don't fill this out: <input name="bot-field" /></label></p>
            <div class="form-row">
              <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" name="firstName" required placeholder="John" />
              </div>
              <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName" name="lastName" required placeholder="Smith" />
              </div>
            </div>

            <div class="form-group">
              <label for="email">Work Email</label>
              <input type="email" id="email" name="email" required placeholder="john@smithlawfirm.com" />
            </div>

            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input type="tel" id="phone" name="phone" placeholder="(555) 123-4567" />
            </div>

            <div class="form-group">
              <label for="firmName">Firm Name</label>
              <input type="text" id="firmName" name="firmName" required placeholder="Smith Law Firm" />
            </div>

            <div class="form-group">
              <label for="practiceArea">Primary Practice Area</label>
              <select id="practiceArea" name="practiceArea" required>
                <option value="">Select your main practice area</option>
                <option value="personal-injury">Personal Injury</option>
                <option value="family-law">Family Law</option>
                <option value="immigration">Immigration</option>
                <option value="estate-planning">Estate Planning</option>
                <option value="bankruptcy">Bankruptcy</option>
                <option value="criminal-defense">Criminal Defense</option>
                <option value="workers-comp">Workers' Compensation</option>
                <option value="employment">Employment Law</option>
                <option value="business">Business/Corporate</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label for="revenue">Annual Revenue Range</label>
              <select id="revenue" name="revenue" required>
                <option value="">Select your revenue range</option>
                <option value="under-1m">Under $1M</option>
                <option value="1m-2m">$1M - $2M</option>
                <option value="2m-5m">$2M - $5M</option>
                <option value="5m-10m">$5M - $10M</option>
                <option value="10m-15m">$10M - $15M</option>
                <option value="15m-plus">$15M+</option>
              </select>
            </div>

            <div class="form-group">
              <label for="marketingSpend">Monthly Marketing Spend</label>
              <select id="marketingSpend" name="marketingSpend" required>
                <option value="">Select your monthly spend</option>
                <option value="under-5k">Under $5K</option>
                <option value="5k-10k">$5K - $10K</option>
                <option value="10k-25k">$10K - $25K</option>
                <option value="25k-50k">$25K - $50K</option>
                <option value="50k-plus">$50K+</option>
              </select>
            </div>

            <div class="form-group">
              <label for="marketingStructure">Current Marketing Structure</label>
              <select id="marketingStructure" name="marketingStructure" required>
                <option value="">How is your marketing managed?</option>
                <option value="all-inhouse">All in-house</option>
                <option value="all-outsourced">All outsourced</option>
                <option value="mix">Mix of both</option>
                <option value="not-sure">Not sure</option>
              </select>
            </div>

            <div class="form-group">
              <label for="whyNow">Why Now? (Optional)</label>
              <textarea id="whyNow" name="whyNow" rows="3" placeholder="What prompted you to look into this?"></textarea>
            </div>

            <button type="submit" class="btn btn-primary btn-lg submit-btn">
              Submit Application
            </button>

            <p class="form-disclaimer">
              Keith reviews every application within 24 hours. We'll follow up with next steps if it's a fit.
            </p>
          </form>
        </div>
      </div>
      </div>
    </div>
  </section>

  <!-- What You Get Section -->
  <section class="audit-includes">
    <div class="container">
      <div class="includes-header">
        <h2 class="includes-title">What's Included in Your Diagnostic</h2>
        <p class="includes-subtitle">
          A complete diagnostic of your law firm's marketing. No fluff. Just practical insights you can use.
        </p>
      </div>

      <div class="includes-grid">
        {diagnosticCards.map((item) => (
          <div class="include-card">
            <div class="include-icon">
              {item.icon === 'chart' && (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="18" y1="20" x2="18" y2="10"></line>
                  <line x1="12" y1="20" x2="12" y2="4"></line>
                  <line x1="6" y1="20" x2="6" y2="14"></line>
                </svg>
              )}
              {item.icon === 'search' && (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
              )}
              {item.icon === 'target' && (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <circle cx="12" cy="12" r="6"></circle>
                  <circle cx="12" cy="12" r="2"></circle>
                </svg>
              )}
              {item.icon === 'dollar' && (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="1" x2="12" y2="23"></line>
                  <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
              )}
            </div>
            <div class="include-number">{String(diagnosticCards.indexOf(item) + 1).padStart(2, '0')}</div>
            <h3 class="include-title">{item.title}</h3>
            <p class="include-description">{item.description}</p>
          </div>
        ))}
      </div>

      <!-- Featured: 90-Day Roadmap -->
      <div class="roadmap-featured">
        <Image
          src={roadmapBg}
          alt=""
          class="roadmap-bg"
          width={1200}
          quality={80}
        />
        <div class="roadmap-overlay"></div>
        <div class="roadmap-content">
          <div class="roadmap-badge">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>
            </svg>
            The Deliverable
          </div>
          <h3 class="roadmap-title">{roadmap.title}</h3>
          <p class="roadmap-description">{roadmap.description}</p>
          <a href="#audit-form" class="roadmap-cta">
            Apply Now
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Social Proof -->
  <section class="social-proof">
    <div class="container">
      <div class="proof-content">
        <div class="proof-stat">
          <span class="stat-value">200+</span>
          <span class="stat-label">Law Firms Helped</span>
        </div>
        <div class="proof-stat">
          <span class="stat-value">12+</span>
          <span class="stat-label">Years in Legal Marketing</span>
        </div>
        <div class="proof-stat">
          <span class="stat-value">24hr</span>
          <span class="stat-label">Response Time</span>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Hidden honeypot field */
  .hidden {
    display: none;
  }

  /* Hero Section */
  .audit-hero {
    padding: 4rem 0 5rem;
    background: var(--color-bg-dark);
    position: relative;
    overflow: hidden;
  }

  .hero-bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    z-index: 0;
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    z-index: 1;
    background: linear-gradient(to right, rgba(1, 25, 7, 0.85) 0%, rgba(1, 25, 7, 0.78) 40%, rgba(1, 25, 7, 0.68) 100%);
  }

  .hero-container {
    position: relative;
    z-index: 2;
  }

  .hero-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 3rem;
    align-items: start;
  }

  @media (min-width: 1000px) {
    .hero-layout {
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
    }
  }

  .hero-content {
    max-width: 500px;
  }

  .section-label {
    display: inline-block;
    color: #b0b8b3;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    margin-bottom: 0.75rem;
    padding: 0.375rem 1rem;
    background: linear-gradient(135deg, rgba(100, 116, 139, 0.12), rgba(100, 116, 139, 0.06));
    border-radius: 100px;
  }

  .hero-title {
    font-size: clamp(2rem, 5vw, 2.75rem);
    font-weight: 800;
    line-height: 1.1;
    margin-bottom: 1.25rem;
    color: #fff;
  }

  .hero-subtitle {
    font-size: 1.125rem;
    color: #b0b8b3;
    line-height: 1.7;
    margin-bottom: 2rem;
  }

  .trust-signal {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1.25rem;
    background: rgba(255, 255, 255, 0.06);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .keith-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
  }

  .trust-text {
    font-size: 0.9375rem;
    color: #b0b8b3;
    line-height: 1.5;
    margin: 0;
  }

  .trust-text strong {
    color: #fff;
  }

  /* Form Card */
  .form-card {
    background: white;
    padding: 2rem;
    border-radius: 16px;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.08);
    border: 1px solid #e5e7eb;
  }

  @media (min-width: 600px) {
    .form-card {
      padding: 2.5rem;
    }
  }

  .audit-form {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.25rem;
  }

  @media (min-width: 500px) {
    .form-row {
      grid-template-columns: 1fr 1fr;
    }
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
  }

  .form-group label {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text-dark);
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    padding: 0.875rem 1rem;
    font-size: 1rem;
    border: 1px solid #d1d5db;
    border-radius: 10px;
    background: #f9fafb;
    color: var(--color-text-dark);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    font-family: inherit;
  }

  .form-group input::placeholder,
  .form-group textarea::placeholder {
    color: #9ca3af;
  }

  .form-group select {
    color: var(--color-text-dark);
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(41, 140, 66, 0.12);
    background: white;
  }

  .form-group textarea {
    resize: vertical;
    min-height: 80px;
  }

  .submit-btn {
    margin-top: 0.5rem;
    width: 100%;
  }

  .form-disclaimer {
    font-size: 0.8125rem;
    color: #4b5563;
    text-align: center;
    margin: 0;
  }

  /* What You Get Section */
  .audit-includes {
    padding: 5rem 0;
    background: var(--color-bg-dark);
  }

  .includes-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .includes-title {
    font-size: clamp(1.75rem, 4vw, 2.25rem);
    font-weight: 700;
    color: white;
    margin-bottom: 0.75rem;
  }

  .includes-subtitle {
    font-size: 1.0625rem;
    color: #b0b8b3;
    max-width: 500px;
    margin: 0 auto;
  }

  .includes-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.25rem;
  }

  @media (max-width: 700px) {
    .includes-grid {
      grid-template-columns: 1fr;
    }
  }

  .include-card {
    padding: 2rem;
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    transition: transform 0.2s ease, background 0.2s ease, border-color 0.2s ease;
    position: relative;
  }

  .include-card:hover {
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(41, 140, 66, 0.4);
  }

  .include-icon {
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-teal) 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    margin-bottom: 1.25rem;
  }

  .include-number {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    font-size: 0.75rem;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.2);
    font-variant-numeric: tabular-nums;
    letter-spacing: 0.05em;
  }

  .include-title {
    font-size: 1.125rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 0.625rem;
  }

  .include-description {
    font-size: 0.9375rem;
    color: #b0b8b3;
    line-height: 1.6;
    margin: 0;
  }

  /* Featured Roadmap Card */
  .roadmap-featured {
    margin-top: 1.25rem;
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    min-height: 280px;
    display: flex;
    align-items: center;
  }

  .roadmap-bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .roadmap-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      105deg,
      rgba(1, 25, 7, 0.92) 0%,
      rgba(1, 25, 7, 0.8) 50%,
      rgba(1, 25, 7, 0.5) 100%
    );
  }

  .roadmap-content {
    position: relative;
    z-index: 1;
    padding: 2.5rem 3rem;
    max-width: 640px;
  }

  .roadmap-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.375rem 0.875rem;
    background: rgba(41, 140, 66, 0.2);
    border: 1px solid rgba(41, 140, 66, 0.3);
    border-radius: 100px;
    color: var(--color-mint);
    font-size: 0.8125rem;
    font-weight: 600;
    margin-bottom: 1.25rem;
  }

  .roadmap-title {
    font-size: clamp(1.5rem, 3vw, 2rem);
    font-weight: 800;
    color: white;
    margin-bottom: 0.75rem;
    line-height: 1.15;
  }

  .roadmap-description {
    font-size: 1.0625rem;
    color: #b0b8b3;
    line-height: 1.6;
    margin-bottom: 1.5rem;
  }

  .roadmap-cta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-mint);
    font-weight: 700;
    font-size: 1rem;
    text-decoration: none;
    transition: gap 0.2s ease;
  }

  .roadmap-cta:hover {
    gap: 0.75rem;
  }

  @media (max-width: 600px) {
    .roadmap-content {
      padding: 2rem 1.5rem;
    }
  }

  /* Social Proof */
  .social-proof {
    padding: 3rem 0;
    background: var(--color-bg-dark-alt);
  }

  .proof-content {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
  }

  .proof-stat {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .stat-value {
    font-size: clamp(1.75rem, 4vw, 2.25rem);
    font-weight: 800;
    color: var(--color-mint);
  }

  .stat-label {
    font-size: 0.875rem;
    color: #b0b8b3;
  }

  @media (max-width: 500px) {
    .proof-content {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
  }
</style>

<script>
  // US phone number auto-formatter: (555) 123-4567
  const phoneInput = document.getElementById('phone') as HTMLInputElement;
  if (phoneInput) {
    phoneInput.addEventListener('input', () => {
      const digits = phoneInput.value.replace(/\D/g, '').slice(0, 10);
      let formatted = '';
      if (digits.length > 0) {
        formatted = '(' + digits.slice(0, 3);
      }
      if (digits.length >= 3) {
        formatted += ') ' + digits.slice(3, 6);
      }
      if (digits.length >= 6) {
        formatted += '-' + digits.slice(6, 10);
      }
      phoneInput.value = formatted;
    });
  }
</script>
